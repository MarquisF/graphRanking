<% include header %>

<!-- import pagination package -->
<link rel="stylesheet" type="text/css" href="/stylesheets/pagination.min.css">
<script src="/javascripts/pagination.min.js"></script>
<!-- imported -->

<header>
  <h1>PROGRESS</h1>
  <span class='header-links'>
    <a href="/dashboard">Go to dashboard</a>
  </span>
</header>
<article class="container progress">
  <section>
    <table>
      <tr>
        <th>Round</th>
        <th>Choice 1</th>
        <th>Choice 2</th>
        <th>Status</th>
        <th>Reason</th>
      </tr>
      <% for ( var i = 0; i < data.length; i ++ ) { %>
        <tr>
          <td>
            <%= data[i]['round'] %>
          </td>
          <td>
            <p>
              <img class="
                  <%= ( data[i]['status'] === 2 && !data[i]['result'] ) ? 'chosen' : '' %>
                " src='/<%= data[i]['chartId1']['path'] %>' />
            </p>
            <p>
              <%= data[i]['chartId1']['picId'] %>
            </p>
          </td>
          <td>
            <p>
              <img  class="
                <%= ( data[i]['status'] === 2 && data[i]['result'] ) ? 'chosen' : 0 %>
              " src='/<%= data[i]['chartId2']['path'] %>' />
            </p>
            <p>
              <%= data[i]['chartId2']['picId'] %>
            </p>
          </td>
          <td>
            <%= ['Not Finished', 'Accessing', 'Finished'][ data[i]['status'] ] %>
          </td>
          <td>
            <%= data[i]['reason'] %>
          </td>
        </tr>
      <% } %>
    </table>
  </section>
</article>

<script>
  window.countInfo = <%- countInfo %>;
  window.page = <%- page %>;
  window.pageCapacity = <%= pageCapacity %>;
</script>
<script src="/javascripts/progress.js"></script>